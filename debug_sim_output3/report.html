
<!doctype html><html lang="zh"><meta charset="utf-8"/>
<title>Leakage Buster æŠ¥å‘Š</title>
<style>
  body{font-family:system-ui,Segoe UI,Arial,PingFang SC; margin:24px}
  .risk{border:1px solid #ddd; border-radius:8px; padding:12px 16px; margin:12px 0}
  .sev-high{border-left:6px solid #d9534f}.sev-medium{border-left:6px solid #f0ad4e}.sev-low{border-left:6px solid #5bc0de}
  code,pre{background:#f8f8f8; padding:2px 4px; border-radius:4px}
  .summary{background:#f9f9f9; border:1px solid #ddd; border-radius:8px; padding:16px; margin:16px 0}
  .fix-card{background:#e8f5e8; border:1px solid #c3e6c3; border-radius:8px; padding:12px; margin:8px 0}
  .fix-high{background:#fdf2f2; border-color:#f5c6cb}
  .fix-medium{background:#fff3cd; border-color:#ffeaa7}
  .fix-low{background:#d1ecf1; border-color:#bee5eb}
  .stat-leak-section{background:#f0f8ff; border:2px solid #4a90e2; border-radius:8px; padding:16px; margin:16px 0}
  .leak-score{font-weight:bold; color:#d9534f}
  .evidence-toggle{cursor:pointer; color:#4a90e2; text-decoration:underline}
  .evidence-details{display:none; margin-top:8px; padding:8px; background:#f8f9fa; border-radius:4px}
  .simulation-results{background:#fff3cd; border:1px solid #ffeaa7; border-radius:8px; padding:12px; margin:12px 0}
  .comparison-table{border-collapse:collapse; width:100%; margin:8px 0}
  .comparison-table th, .comparison-table td{border:1px solid #ddd; padding:8px; text-align:left}
  .comparison-table th{background:#f5f5f5}
  .leak-high{background:#fdf2f2}
  .leak-medium{background:#fff3cd}
  .leak-low{background:#d1ecf1}
  ul{margin:8px 0; padding-left:20px}
</style>
<h1>Leakage Buster æŠ¥å‘Š v0.3</h1>
<div>å‘½ä»¤å‚æ•°ï¼š<code>{'train': 'debug_sim3.csv', 'target': 'y', 'time_col': 'date', 'out': 'debug_sim_output3', 'cv_type': 'timeseries', 'simulate_cv': 'time', 'leak_threshold': 0.02}</code></div>
<div>ç›®æ ‡åˆ—ï¼š<code>y</code>ï¼›æ—¶é—´åˆ—ï¼š<code>date</code>ï¼›CVç­–ç•¥ï¼š<code>timeseries</code></div>
<div>æ ·æœ¬æ•°ï¼š20ï¼›ç‰¹å¾æ•°ï¼š4</div>

<div>æ—¶åºæ¨¡æ‹Ÿï¼š<code>time</code>ï¼›æ³„æ¼é˜ˆå€¼ï¼š<code>0.02</code></div>


<!-- ä¿®å¤å»ºè®®æ‘˜è¦å¡ç‰‡åŒºåŸŸ -->

<div class="summary">
  <h2>ğŸ”§ ä¿®å¤å»ºè®®æ‘˜è¦</h2>
  
  
  
  
  
  <div class="fix-card fix-high">
    <h4>ğŸš¨ é«˜å±é—®é¢˜ï¼ˆ2ä¸ªï¼‰</h4>
    <ul>
    
      <li><strong>Target leakage (high correlation)</strong>
        
          - ç«‹å³åˆ é™¤æˆ–åœ¨CVå†…é‡ç®—ç›¸å…³åˆ—
        
        
        <span class="leak-score">[é£é™©åˆ†: 0.90]</span>
        
      </li>
    
      <li><strong>Target Encoding leakage risk</strong>
        
          - æ£€æŸ¥æ˜¯å¦ä½¿ç”¨äº†å…¨é‡ç›®æ ‡ç¼–ç ï¼Œæ”¹ä¸ºCVå†…ç¼–ç 
        
        
        <span class="leak-score">[é£é™©åˆ†: 0.70]</span>
        
      </li>
    
    </ul>
  </div>
  
  
  
  
  
  <div class="fix-card fix-low">
    <h4>ğŸ’¡ å»ºè®®ä¼˜åŒ–ï¼ˆ1ä¸ªï¼‰</h4>
    <ul>
    
      <li><strong>Time-awareness suggestion</strong>
        
          - ä½¿ç”¨æ—¶é—´æ„ŸçŸ¥çš„ç‰¹å¾å·¥ç¨‹å’ŒéªŒè¯ç­–ç•¥
        
        
        <span class="leak-score">[é£é™©åˆ†: 0.30]</span>
        
      </li>
    
    </ul>
  </div>
  
  
  <p><strong>è¯¦ç»†ä¿®å¤ä»£ç è§ï¼š</strong> <code>fix_transforms.py</code></p>
</div>


<hr/>

<!-- Statistical Leakage æ¿å— -->
<div class="stat-leak-section">
  <h2>ğŸ“Š Statistical Leakage Detection</h2>
  <p><em>v0.3æ–°å¢ï¼šæ£€æµ‹ç›®æ ‡ç¼–ç (TE)ã€WOEã€æ»šåŠ¨ç»Ÿè®¡ç­‰ç»Ÿè®¡ç±»æ³„æ¼</em></p>
  
  
  
    <h3>æ£€æµ‹åˆ°çš„ç»Ÿè®¡ç±»æ³„æ¼é£é™©</h3>
    
      <div class="risk sev-high">
        <h4>Target Encoding leakage risk 
          
          <span class="leak-score">[é£é™©åˆ†: 0.70]</span>
          
        </h4>
        <p>æ£€æµ‹åˆ° 1 ä¸ªç–‘ä¼¼ç›®æ ‡ç¼–ç ç‰¹å¾ï¼Œä¸ç›®æ ‡é«˜ç›¸å…³ä¸”å€¼åŸŸå¯ç–‘ã€‚</p>
        
        
        <div>
          <span class="evidence-toggle" onclick="toggleEvidence('Target_Encoding_leakage_risk')">ç‚¹å‡»æŸ¥çœ‹è¯¦ç»†è¯æ®</span>
          <div id="Target_Encoding_leakage_risk" class="evidence-details">
            <h5>å¯ç–‘ç‰¹å¾è¯¦æƒ…ï¼š</h5>
            <table class="comparison-table">
              <tr>
                <th>ç‰¹å¾å</th>
                <th>ç›¸å…³æ€§</th>
                <th>é£é™©åˆ†</th>
                <th>å»ºè®®</th>
              </tr>
              
              <tr class="leak-high">
                <td><code>target_enc_feature</code></td>
                <td>0.996</td>
                <td>0.70</td>
                <td>
                  
                    åˆ é™¤æˆ–æ”¹ä¸ºCVå†…ç¼–ç 
                  
                </td>
              </tr>
              
            </table>
          </div>
        </div>
        
      </div>
    
  
</div>

<hr/>

<!-- æ—¶åºæ¨¡æ‹Ÿç»“æœ -->

<div class="simulation-results">
  <h2>â° Time Series Simulation Results</h2>
  <p><em>å¯¹æ¯”TimeSeriesSplitä¸KFoldçš„OOFæŒ‡æ ‡å˜åŒ–</em></p>
  
  
    <div>
      <h3>æ¨¡æ‹Ÿæ‘˜è¦</h3>
      <ul>
        <li>æ€»ç‰¹å¾æ•°ï¼š1</li>
        <li>æ³„æ¼ç‰¹å¾æ•°ï¼š0</li>
        <li>é«˜å±æ³„æ¼ç‰¹å¾æ•°ï¼š0</li>
        <li>æ³„æ¼ç‡ï¼š0.0%</li>
        <li>å¹³å‡åˆ†æ•°å·®å¼‚ï¼š0.0000</li>
        <li>æœ€å¤§åˆ†æ•°å·®å¼‚ï¼š0.0000</li>
      </ul>
    </div>
    
    
    <div>
      <h3>è¯¦ç»†å¯¹æ¯”ç»“æœ</h3>
      <table class="comparison-table">
        <tr>
          <th>ç‰¹å¾å</th>
          <th>TimeSeries CV</th>
          <th>KFold CV</th>
          <th>åˆ†æ•°å·®å¼‚</th>
          <th>æ³„æ¼çŠ¶æ€</th>
          <th>ä¸¥é‡ç¨‹åº¦</th>
        </tr>
        
        <tr class="leak-none">
          <td><code>target_enc_feature</code></td>
          <td>1.0000 Â± 0.0000</td>
          <td>1.0000 Â± 0.0000</td>
          <td>0.0000</td>
          <td>âœ… å¦</td>
          <td>NONE</td>
        </tr>
        
      </table>
    </div>
    
  
</div>


<hr/>

<!-- è¯¦ç»†é£é™©é¡¹ -->
<h2>ğŸ“‹ è¯¦ç»†æ£€æµ‹ç»“æœ</h2>

  
    <div class="risk sev-high">
      <h3>Target leakage (high correlation)ï¼ˆhighï¼‰
        
        <span class="leak-score">[é£é™©åˆ†: 0.90]</span>
        
      </h3>
      <p>ä»¥ä¸‹åˆ—ä¸ç›®æ ‡é«˜åº¦ç›¸å…³ï¼ˆ|corr|æˆ–RÂ²â‰¥0.98ï¼‰ï¼Œå¯èƒ½æ³„æ¼ã€‚</p>
      <pre>{
  "columns": {
    "target_enc_feature": 0.9917124526189287
  }
}</pre>
    </div>
  
    <div class="risk sev-high">
      <h3>Target Encoding leakage riskï¼ˆhighï¼‰
        
        <span class="leak-score">[é£é™©åˆ†: 0.70]</span>
        
      </h3>
      <p>æ£€æµ‹åˆ° 1 ä¸ªç–‘ä¼¼ç›®æ ‡ç¼–ç ç‰¹å¾ï¼Œä¸ç›®æ ‡é«˜ç›¸å…³ä¸”å€¼åŸŸå¯ç–‘ã€‚</p>
      <pre>{
  "suspicious_columns": {
    "target_enc_feature": {
      "correlation": 0.9958476051178359,
      "leak_score": 0.7,
      "mean": 0.3179025922144486,
      "target_mean": 0.3
    }
  }
}</pre>
    </div>
  
    <div class="risk sev-low">
      <h3>Time-awareness suggestionï¼ˆlowï¼‰
        
        <span class="leak-score">[é£é™©åˆ†: 0.30]</span>
        
      </h3>
      <p>å»ºè®®ä½¿ç”¨æ—¶é—´æ„ŸçŸ¥åˆ‡åˆ†/ç¼–ç å¹¶æ ¡éªŒå£å¾„ä¸€è‡´ã€‚</p>
      <pre>{
  "max": "2023-01-20 00:00:00",
  "min": "2023-01-01 00:00:00"
}</pre>
    </div>
  


<hr/>
<p><em>æŠ¥å‘Šç”Ÿæˆæ—¶é—´ï¼š2025-09-13T07:16:08</em></p>

<script>
function toggleEvidence(id) {
  var element = document.getElementById(id);
  if (element.style.display === "none") {
    element.style.display = "block";
  } else {
    element.style.display = "none";
  }
}
</script>
</html>
